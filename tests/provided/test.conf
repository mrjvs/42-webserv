server {
    port 8080
    body_limit 100 # body limit of 100 bytes

    # PUT test, serves /serve_me with cgi support and uploads to /uploads
    route {
        location /put_test/
        allowed_methods PUT DELETE
        cgi ../tests/provided/ubuntu_cgi_tester
        cgi_ext bla
        root ../tests/provided/serve_me
        index index.html
        save_uploads ../tests/provided/uploads
    }

    # POST test, serves /serve_me with cgi support
    route {
        location /post_body/

        cgi ../tests/provided/ubuntu_cgi_tester
        cgi_ext bla
        root ../tests/provided/serve_me
        index index.html
    }

    # file serving test, serves /YoupiBanane with cgi support and indexing
    route {
        location /directory/

        cgi ../tests/provided/ubuntu_cgi_tester
        cgi_ext bla
        root ../tests/provided/YoupiBanane
        index youpi.bad_extension
    }

    # GET test, serves /serve_me with index and cgi support
    route {
        location /
        allowed_methods GET

        cgi ../tests/provided/ubuntu_cgi_tester
        cgi_ext bla
        root ../tests/provided/serve_me
        index index.html
    }
}
